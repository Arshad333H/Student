generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               String       @id @default(cuid())
  email            String       @unique
  name             String?
  profileImg       String?
  role             UserRole     @default(STUDENT) 

  academicRecords  Enrollment[]
  coursesTaught    Course[]
  
  createdAt        DateTime     @default(now())
  updatedAt        DateTime     @updatedAt
}

model Course {
  id               String       @id @default(cuid())
  name             String
  code             String?      @unique
  creditHours      Int          @default(3)
  
  teacherId        String?
  teacher          User?        @relation(fields: [teacherId], references: [id])
  
  enrollments      Enrollment[]
}

model Enrollment {
  id            String    @id @default(cuid())
  
  userId        String
  user          User      @relation(fields: [userId], references: [id])
  
  courseId      String
  course        Course    @relation(fields: [courseId], references: [id])
  
  finalGrade    Float?
  
  @@unique([userId, courseId])
}

enum UserRole {
  STUDENT
  ADMIN
}